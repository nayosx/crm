<div class="flex align-items-center gap-2 border-bottom-1 surface-border pt-4 pb-4">
  <h2 class="pl-4">Lista de Servicios</h2>
</div>

<div class="flex flex-column md:flex-row align-items-start md:align-items-center justify-content-between gap-3 mt-3 mb-3 px-4">
  <div class="flex align-items-center gap-2">
    <button
      pButton
      label="Crear ProgramaciÃ³n"
      icon="pi pi-plus"
      class="p-button-success"
      (click)="onCreateLaundry()"
      type="button">
    </button>
  </div>

  <form [formGroup]="filtersForm" class="flex align-items-center gap-2 w-full md:w-auto">
    <p-select
      class="w-full md:w-18rem"
      [options]="statusOptions"
      optionLabel="label"
      optionValue="value"
      placeholder="Filtrar por estado"
      formControlName="status">
    </p-select>

    <button
      pButton
      type="button"
      label="Limpiar"
      icon="pi pi-filter-slash"
      (click)="resetFilters()">
    </button>
  </form>
</div>

<p-card header="Programaciones registradas">
  <p-table
    [value]="laundries"
    [lazy]="true"
    [paginator]="true"
    [rows]="rows"
    [totalRecords]="totalRecords"
    [loading]="loading"
    (onLazyLoad)="onLazyLoad($event)"
    [rowsPerPageOptions]="[5, 10, 20, 50]"
    responsiveLayout="scroll">
    <ng-template pTemplate="header">
      <tr>
        <th>ID</th>
        <th>Cliente</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-laundry>
      <tr>
        <td>{{ laundry.id }}</td>
        <td>{{ laundry.client?.name || 'Sin nombre' }}</td>
        <td>
          <p-tag [value]="laundry.status" [class]="statusColorMap[laundry.status]"></p-tag>
        </td>
        <td>
          <button
            pButton
            icon="pi pi-pencil"
            size="small"
            (click)="onEditLaundry(laundry.id)"
            type="button">
          </button>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="6">No se encontraron programaciones.</td>
      </tr>
    </ng-template>
  </p-table>
</p-card>
